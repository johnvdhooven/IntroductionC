@startuml

title CVM layered architecture

package "User Interface Layer" {
    [Display]
    [Keyboard]
    [Development Console]
}

package "System Control Layer" {
    [FSM] #red
}

package "Subsystems Layer" {
    [Cola Dispenser]
    [Coin Acceptor]
    [Change Dispenser]
}

package "Hardware Abstraction Layer" {
    [Hardware IO]
}

[FSM] -down-> [Coin Acceptor]
[FSM] -down-> [Cola Dispenser]
[FSM] -down-> [Change Dispenser]
[FSM] -up-> [Display]
[FSM] -up-> [Keyboard]
[FSM] -up-> [Development Console]
[Coin Acceptor] --> [Hardware IO]
[Cola Dispenser] --> [Hardware IO]
[Change Dispenser] --> [Hardware IO]
[Development Console] -down-> [Keyboard]
[Development Console] -down-> [Display]
[Display] --> [Hardware IO]
[Keyboard] --> [Hardware IO]

@enduml
